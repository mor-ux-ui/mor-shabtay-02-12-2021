(this["webpackJsonpmor-shabtay-02-12-2021"]=this["webpackJsonpmor-shabtay-02-12-2021"]||[]).push([[0],{14:function(e,t,c){e.exports={"switch-wrapper":"switch_switch-wrapper__11P2M",switch:"switch_switch__1RhGb",slider:"switch_slider__JdcPA",round:"switch_round__2W7AZ"}},21:function(e){e.exports=JSON.parse('{"API_KEY":"b4a3d31e6dbf973a732b78ad6c588f62","CURRENCY_INTERVAL_SEC":10}')},38:function(e,t,c){},39:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c.n(r),a=c(11),s=c.n(a),i=(c(38),c(39),c(2)),o=c(9),l=c(3),d=c(14),u=c.n(d),j=c(0);function b(e){var t=e.on,c=void 0===t?"on":t,n=e.off,a=void 0===n?"off":n,s=e.active,i=e.switchChanged,o=Object(r.useState)(s),d=Object(l.a)(o,2),b=d[0],h=d[1];return Object(j.jsxs)("div",{className:u.a["switch-wrapper"],children:[Object(j.jsx)("span",{children:a}),Object(j.jsxs)("label",{className:u.a.switch,children:[Object(j.jsx)("input",{type:"checkbox",checked:b,onChange:function(){h(!b),i(!b)}}),Object(j.jsx)("span",{className:"".concat(u.a.slider," ").concat(u.a.round)})]}),Object(j.jsx)("span",{children:c})]})}var h=c(19),O=c.n(h),p=c(30),v=c(31),m=c.n(v),x=function(e){var t=Object(r.useState)(void 0),c=Object(l.a)(t,2),n=c[0],a=c[1],s=Object(r.useState)(!1),i=Object(l.a)(s,2),o=i[0],d=i[1],u=Object(r.useState)(!0),j=Object(l.a)(u,2),b=j[0],h=j[1],v=function(){var e=Object(p.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.request(t);case 3:c=e.sent,a(c.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d(e.t0);case 10:return e.prev=10,h(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){e.fetchData?v(e):h(!1)}),[e]),{response:n,error:o,loading:b,fetchData:v}},f=c(4),y=c(21),N="SET_PRODUCTS",g="SET_CURRENCY",C="TOGGLE_CURRENCY",E="ARCHIVE_PRODUCT",w="UNARCHIVE_PRODUCT",P="ADD_PRODUCT",S=function(e){return{type:g,payload:e}},D=function(e){return{type:C,payload:e}};function I(){var e="https://api.exchangeratesapi.io/v1/latest?access_key=".concat(y.API_KEY,"&symbols=ILS,USD"),t=Object(f.b)(),c={method:"GET",url:e,fetchData:!0},n=x({fetchData:!1}),a=n.response,s=n.loading,i=n.error,l=n.fetchData;Object(r.useEffect)((function(){l(c);var e=setInterval((function(){l(c)}),1e3*y.CURRENCY_INTERVAL_SEC);return function(){return clearInterval(e)}}),[]),Object(r.useEffect)((function(){a&&!i?t(S(a.rates.ILS/a.rates.USD)):(t(S(1)),t(D(!0)))}),[a,i,s]);return Object(j.jsxs)("header",{children:[Object(j.jsx)(o.b,{to:"/ProductByItem",children:"Purchase by item"}),Object(j.jsx)(o.b,{to:"/ProductByStore",children:"Purchase by store"}),a&&!i&&Object(j.jsx)("div",{style:{marginLeft:"auto"},children:Object(j.jsx)(b,{on:"USD",off:"ILS",active:!0,switchChanged:function(e){t(D(!!e))}})})]})}var _=c(5),B=function(){var e=["ebay","amazon","next","shein","aliexpress","iherb"];return e[Math.floor(Math.random()*e.length)]},T=function(e){return e.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};function U(e){var t=e.product,c=e.actionBtn,r=Object(f.c)((function(e){return e.currency})),n=t.price;return r.currencyValue&&!r.currencyInUsd&&(n=t.price*r.currencyValue),n=T(n),n+=r.currencyInUsd?"$":"\u20aa",Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"props",children:[Object(j.jsx)("div",{className:"prod-ttl",children:Object(j.jsx)("div",{className:"col prod-ttl-txt",children:t.title})}),Object(j.jsxs)("div",{className:"other-prod-props",children:[Object(j.jsx)("div",{className:"col",children:t.store}),Object(j.jsx)("div",{className:"col",children:t.deliveryEstimatedDate.toISOString().split("T")[0]}),Object(j.jsx)("div",{className:"col price",children:n})]})]}),Object(j.jsx)("div",{className:"actions",children:Object(j.jsx)("button",{onClick:c.handler,className:"btn archive action-col col",children:c.title})})]})}function R(e){var t=e.loading,c=e.error,r=e.products,n=e.actionBtn;return Object(j.jsxs)("div",{className:"product table",children:[Object(j.jsxs)("div",{className:"flexy th row",children:[Object(j.jsxs)("div",{className:"props",children:[Object(j.jsx)("div",{className:"prod-ttl",children:Object(j.jsx)("div",{className:"col-h",children:"Title"})}),Object(j.jsxs)("div",{className:"other-prod-props",children:[Object(j.jsx)("div",{className:"col-h",children:"Store"}),Object(j.jsx)("div",{className:"col-h",children:"Delivery estimated date"}),Object(j.jsx)("div",{className:"col-h",children:"Price"})]})]}),Object(j.jsx)("div",{className:"actions",children:Object(j.jsx)("div",{className:"col-h action-col"})})]}),t&&Object(j.jsx)("p",{children:"loading..."}),c&&Object(j.jsx)("p",{className:"error-text",children:c.message}),!c&&!t&&r&&0===r.length&&Object(j.jsx)("p",{children:"oops.. no products to show here"}),r&&r.sort((function(e,t){return e.deliveryEstimatedDate<t.deliveryEstimatedDate?1:-1})).map((function(e){return Object(j.jsx)(U,{product:e,actionBtn:{title:n.title,handler:function(){n.handler(e)}}},e.id)}))]})}function k(e){var t=e.onInputChanged,c=e.active;return Object(j.jsx)("input",{className:"auto-complete-input",type:"text",disabled:c?"":"disabled",placeholder:"Search for product",onChange:function(e){return t(e.target.value)}})}var L=function(e){return Object(j.jsx)("div",{className:"back-drop",onClick:e.onBackDropClick,children:e.children})},V=function(e){return Object(j.jsx)(n.a.Fragment,{children:s.a.createPortal(Object(j.jsx)(L,{onBackDropClick:e.onBackDropClick,children:Object(j.jsx)("div",{onClick:function(e){return e.stopPropagation()},className:"modal-inner-card",children:e.children})}),document.getElementById("modal-wrapper-root"))})},A={value:"",isTouched:!1},F=function e(t,c){return"INPUT"===c.type?{value:c.value,isTouched:t.isTouched}:"BLUR"===c.type?{isTouched:!0,value:t.value}:"RESET"===c.type?{isTouched:!1,value:""}:e},H=function(e){var t=Object(r.useReducer)(F,A),c=Object(l.a)(t,2),n=c[0],a=c[1],s=e(n.value),i=!s&&n.isTouched;return{value:n.value,isValid:s,hasError:i,valueChangeHandler:function(e){a({type:"INPUT",value:e.target.value})},inputBlurHandler:function(e){a({type:"BLUR"})},reset:function(){a({type:"RESET"})}}};function M(e){var t=e.CloseModal,c=Object(f.b)(),r=function(e){return""!==e.trim()},n=H(r),a=n.value,s=n.isValid,i=n.hasError,o=n.valueChangeHandler,l=n.inputBlurHandler,d=H(r),u=d.value,b=d.isValid,h=d.hasError,O=d.valueChangeHandler,p=d.inputBlurHandler,v=H(r),m=v.value,x=v.isValid,y=v.hasError,N=v.valueChangeHandler,g=v.inputBlurHandler,C=H(r),E=C.value,w=C.isValid,S=C.hasError,D=C.valueChangeHandler,I=C.inputBlurHandler,_=!1;s&&b&&x&&w&&(_=!0);return Object(j.jsxs)("section",{children:[Object(j.jsxs)("div",{className:"actions-row",children:[Object(j.jsx)("h3",{children:"Add Item"}),Object(j.jsx)("span",{className:"close-x",onClick:t,children:"\u2573"})]}),Object(j.jsxs)("form",{onSubmit:function(e){var r;(e.preventDefault(),_)&&(c((r={id:Date.now(),title:a,store:u,price:parseInt(m),deliveryEstimatedDate:new Date(E)},{type:P,payload:r})),t())},children:[Object(j.jsxs)("div",{className:"control-group",children:[Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Item Name"}),Object(j.jsx)("input",{className:"".concat(i?"error":""),type:"text",id:"name",value:a,onChange:o,onBlur:l})]}),Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Store Name"}),Object(j.jsx)("input",{className:"".concat(h?"error":""),type:"text",id:"name",value:u,onChange:O,onBlur:p})]})]}),Object(j.jsxs)("div",{className:"control-group",children:[Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{htmlFor:"price",children:"Price"}),Object(j.jsx)("input",{className:"".concat(y?"error":""),type:"number",id:"price",value:m,onChange:N,onBlur:g})]}),Object(j.jsxs)("div",{className:"form-control",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Estimated delivery date"}),Object(j.jsx)("input",{className:"".concat(S?"error":""),type:"date",id:"name",value:E,onChange:D,onBlur:I})]})]}),Object(j.jsx)("div",{className:"form-actions",children:Object(j.jsx)("button",{disabled:!_,children:"Submit"})})]})]})}var Y=function(){var e=Object(f.c)((function(e){return e.allProducts.products})),t=Object(r.useState)([]),c=Object(l.a)(t,2),a=c[0],s=c[1],i=Object(r.useState)(!1),o=Object(l.a)(i,2),d=o[0],u=o[1],b=Object(r.useState)(""),h=Object(l.a)(b,2),O=h[0],p=h[1],v=Object(f.b)(),m=x({method:"GET",url:"https://fakestoreapi.com/products",fetchData:!e}),y=m.response,g=m.loading,C=m.error;Object(r.useEffect)((function(){y&&!e&&v(function(e){return{type:N,payload:e}}(y.map((function(e){return Object(_.a)(Object(_.a)({},e),{},{deliveryEstimatedDate:(t=new Date(2020,1,1),c=new Date,new Date(+t+Math.random()*(c-t))),store:B()});var t,c})))),s(e)}),[y,e]);var w=function(t){if(e)return e.filter((function(e){return e.title.toLowerCase().trim().includes(t.toLowerCase().trim())}))};return Object(r.useEffect)((function(){s(w(O))}),[e]),Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsxs)("div",{className:"actions-row",children:[d&&Object(j.jsx)(V,{onBackDropClick:function(){u(!1)},children:Object(j.jsx)(M,{CloseModal:function(){u(!1)}})}),Object(j.jsx)(k,{onInputChanged:function(t){p(t),s(""===t?e:w(t))},active:!C&&!g&&e&&e.length>0}),!C&&!g&&Object(j.jsx)("button",{className:"add-prod-btn",onClick:function(){u(!d)},children:"Add Product \uff0b"})]}),Object(j.jsx)(R,{loading:g,error:C,products:a,actionBtn:{title:"archive",handler:function(e){v({type:E,payload:e})}}})]})};function G(){var e=Object(f.c)((function(e){return e.allProducts.archivedProducts})),t=Object(r.useState)([]),c=Object(l.a)(t,2),a=c[0],s=c[1],i=Object(r.useState)(""),o=Object(l.a)(i,2),d=o[0],u=o[1],b=Object(f.b)(),h=Object(r.useCallback)((function(t){if(e)return e.filter((function(e){return e.title.toLowerCase().trim().includes(t.toLowerCase().trim())}))}),[e]);return Object(r.useEffect)((function(){s(h(d))}),[e,d,h]),Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsx)("div",{className:"actions-row",children:Object(j.jsx)(k,{onInputChanged:function(t){u(t),s(""===t?e:h(t))},active:e&&e.length>0})}),Object(j.jsx)(R,{loading:!1,error:"",products:a,actionBtn:{title:"Reactivate",handler:function(e){b({type:w,payload:e})}}})]})}function q(){return Object(j.jsxs)(n.a.Fragment,{children:[Object(j.jsxs)("header",{className:"sub-header",children:[Object(j.jsx)(o.b,{to:"/ProductByItem/DeliveryList",children:"Delivery list"}),Object(j.jsx)(o.b,{to:"/ProductByItem/ArchivedList",children:"Archived list"})]}),Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",element:Object(j.jsx)(i.a,{replace:!0,to:"/ProductByItem/DeliveryList"})}),Object(j.jsx)(i.b,{path:"/DeliveryList",element:Object(j.jsx)(Y,{})}),Object(j.jsx)(i.b,{exact:!0,path:"/ArchivedList",element:Object(j.jsx)(G,{})})]})})]})}var J=c(10),X=c(33);function $(e){var t=e.store,c=Object(f.c)((function(e){return e.currency})),r=c.currencyInUsd?t.price:t.price*c.currencyValue;return r=T(r),r+=c.currencyInUsd?"$":"\u20aa",Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",children:t.name}),Object(j.jsx)("div",{className:"col",children:t.qnt}),Object(j.jsx)("div",{className:"col price",children:r})]})}function K(e){var t=e.loading,c=e.error,r=e.stores;return Object(j.jsxs)("div",{className:"store table",children:[Object(j.jsxs)("div",{className:"flexy th row",children:[Object(j.jsx)("div",{className:"col-h",children:"Store"}),Object(j.jsx)("div",{className:"col-h",children:"Quantety"}),Object(j.jsx)("div",{className:"col-h",children:"Price"})]}),t&&Object(j.jsx)("p",{children:"loading..."}),c&&Object(j.jsx)("p",{children:c.message}),(!r&&!r||r&&0===r.length)&&Object(j.jsx)("p",{children:"oops.. no stores to show here"}),r&&r.sort((function(e,t){return e.name>t.name?1:-1})).map((function(e){return Object(j.jsx)($,{store:e},e.id)}))]})}function z(){var e=function e(t,c,r,n){Object(X.a)(this,e),this.id=t,this.name=c,this.qnt=r,this.price=n},t=[],c=Object(f.c)((function(e){return e.allProducts.products})),r=Object(f.c)((function(e){return e.allProducts.archivedProducts}));c=c||[],r=r||[];var n=[].concat(Object(J.a)(c),Object(J.a)(r)),a=0;n&&n.forEach((function(c,r){var n=t.filter((function(e){return e.name===c.store}));n.length>0?(n[0].qnt++,n[0].price+=c.price):(n=new e(r,c.store,1,c.price),t.push(n)),a+=c.price}));var s=Object(f.c)((function(e){return e.currency}));return s.currencyValue&&!s.currencyInUsd&&(a*=s.currencyValue),a=T(a),a+=s.currencyInUsd?"$":"\u20aa",Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)(K,{loading:!1,error:!1,stores:t}),Object(j.jsx)("div",{className:"total-line",children:Object(j.jsx)("span",{children:"Total price: ".concat(a)})})]})}var Q=function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(I,{}),Object(j.jsxs)(i.d,{children:[Object(j.jsx)(i.b,{exact:!0,path:"/",element:Object(j.jsx)(i.a,{replace:!0,to:"/ProductByItem/DeliveryList"})}),Object(j.jsx)(i.b,{exact:!0,path:"/ProductByItem/*",element:Object(j.jsx)(q,{})}),Object(j.jsx)(i.b,{exact:!0,path:"/ProductByStore",element:Object(j.jsx)(z,{})})]})]})},W=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,67)).then((function(t){var c=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),r(e),n(e),a(e),s(e)}))},Z=c(17),ee={products:[],archivedProducts:[]},te={currencyValue:1,currencyInUsd:!0},ce=Object(Z.a)({allProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initialState:ee},t=arguments.length>1?arguments[1]:void 0,c=t.type,r=t.payload;switch(c){case P:return Object(_.a)(Object(_.a)({},e),{},{products:[].concat(Object(J.a)(e.products),[r])});case N:return Object(_.a)(Object(_.a)({},e),{},{products:r});case w:return Object(_.a)(Object(_.a)({},e),{},{products:[].concat(Object(J.a)(e.products),[r]),archivedProducts:e.archivedProducts.filter((function(e){return e.id!==r.id}))});case E:return e.archivedProducts?Object(_.a)(Object(_.a)({},e),{},{products:e.products.filter((function(e){return e.id!==r.id})),archivedProducts:[].concat(Object(J.a)(e.archivedProducts),[r])}):Object(_.a)(Object(_.a)({},e),{},{products:e.products.filter((function(e){return e.id!==r.id})),archivedProducts:[r]});default:return e}},currency:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{initialState:te},t=arguments.length>1?arguments[1]:void 0,c=t.type,r=t.payload;switch(c){case g:return Object(_.a)(Object(_.a)({},e),{},{currencyValue:r});case C:return Object(_.a)(Object(_.a)({},e),{},{currencyInUsd:r});default:return e}}}),re=ce,ne=Object(Z.b)(re,{},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(o.a,{basename:"/mor-shabtay-02-12-2021",children:Object(j.jsx)(f.a,{store:ne,children:Object(j.jsx)(Q,{})})})}),document.getElementById("root")),W()}},[[66,1,2]]]);
//# sourceMappingURL=main.fed16e2c.chunk.js.map